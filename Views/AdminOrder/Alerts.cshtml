@model List<WEBDOAN.Models.SystemAlert>
@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    ViewData["Title"] = "Cảnh báo hệ thống";
}
<h2>🚨 Cảnh báo hệ thống</h2>
<table class="table table-striped">
    <thead>
        <tr>
            <th>Thông báo</th>
            <th>Mức độ</th>
            <th>Thời gian</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var alert in Model)
        {
            <tr class="table-@alert.Severity.ToLower()">
                <td>@alert.Message</td>
                <td>@alert.Severity</td>
                <td>@alert.CreatedAt.ToString("dd/MM/yyyy HH:mm")</td>
            </tr>
        }
    </tbody>
</table>
<h3>Thêm cảnh báo mới</h3>
<form method="post" asp-action="AddAlert">
    <div class="mb-2">
        <input type="text" name="Message" placeholder="Nội dung cảnh báo" class="form-control" required />
    </div>
    <div class="mb-2">
        <select name="Severity" class="form-control">
            <option value="Info">Info</option>
            <option value="Warning">Warning</option>
            <option value="Danger">Danger</option>
        </select>
    </div>
    <button type="submit" class="btn btn-primary">Thêm</button>
</form>
@foreach (var alert in Model)
{
    <form method="post" asp-action="UpdateAlert" class="mt-3">
        <input type="hidden" name="Id" value="@alert.Id" />
        <div class="row">
            <div class="col-md-6"><input type="text" name="Message" value="@alert.Message" class="form-control" /></div>
            <div class="col-md-3">
                <select name="Severity" class="form-control">
                    <option value="Info" selected="@("Info" == alert.Severity)">Info</option>
                    <option value="Warning" selected="@("Warning" == alert.Severity)">Warning</option>
                    <option value="Danger" selected="@("Danger" == alert.Severity)">Danger</option>
                </select>
            </div>
            <div class="col-md-3">
                <button type="submit" class="btn btn-success">Lưu</button>
                <form method="post" asp-action="DeleteAlert" style="display:inline;">
                    <input type="hidden" name="Id" value="@alert.Id" />
                    <button type="submit" class="btn btn-danger">Xoá</button>
                </form>
            </div>
        </div>
    </form>
}
