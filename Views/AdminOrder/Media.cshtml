@model List<WEBDOAN.Models.MediaFile>
@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}
@{
    ViewData["Title"] = "Quản lý Media";
}

<h2>🖼️ Quản lý Media</h2>
<table class="table table-hover">
    <thead>
        <tr>
            <th>Tên file</th>
            <th>Loại</th>
            <th>URL</th>
            <th>Ngày upload</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var media in Model)
        {
            <tr>
                <td>@media.FileName</td>
                <td>@media.FileType</td>
                <td><a href="@media.Url" target="_blank">Xem</a></td>
                <td>@media.UploadedAt.ToString("dd/MM/yyyy")</td>
            </tr>
        }
    </tbody>
</table>
<h3>Thêm Media mới</h3>
<form method="post" asp-action="AddMedia">
    <div class="mb-2">
        <input type="text" name="FileName" placeholder="Tên file" class="form-control" required />
    </div>
    <div class="mb-2">
        <input type="text" name="FileType" placeholder="Loại (image/video/document)" class="form-control" required />
    </div>
    <div class="mb-2">
        <input type="text" name="Url" placeholder="URL file" class="form-control" required />
    </div>
    <button type="submit" class="btn btn-primary">Thêm</button>
</form>
@foreach (var media in Model)
{
    <form method="post" asp-action="UpdateMedia" class="mt-3">
        <input type="hidden" name="Id" value="@media.Id" />
        <div class="row">
            <div class="col-md-3"><input type="text" name="FileName" value="@media.FileName" class="form-control" /></div>
            <div class="col-md-3"><input type="text" name="FileType" value="@media.FileType" class="form-control" /></div>
            <div class="col-md-4"><input type="text" name="Url" value="@media.Url" class="form-control" /></div>
            <div class="col-md-2">
                <button type="submit" class="btn btn-success">Lưu</button>
                <form method="post" asp-action="DeleteMedia" style="display:inline;">
                    <input type="hidden" name="Id" value="@media.Id" />
                    <button type="submit" class="btn btn-danger">Xoá</button>
                </form>
            </div>
        </div>
    </form>
}
